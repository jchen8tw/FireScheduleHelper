# 消防勤務表易讀小幫手 (Fire Schedule Reader)

這是一個為消防局「人力及勤務管理系統」設計的 Chrome 瀏覽器擴充功能。其主要功能是自動解析網頁中的「番號對照表」，並將勤務編組表與備註欄中的番號（代號）自動替換為對應的人員姓名，大幅提升勤務表的可讀性。同時新增了「作戰編組」功能，協助管理當日出勤人員的車輛配置，並可自動帶入火警系統表單中。

## 主要功能

- **作戰編組編輯與管理 (新功能)**：提供獨立的拖曳式 (Drag-and-Drop) 編輯介面，依據當日勤務表自動篩選出勤人員，快速分配如「攻擊水箱車」、「防線水箱車」、「雲梯車」等任務編組。
- **派遣系統自動帶入 (新功能)**：在火警等系統中，提供一鍵快速填寫功能（Quick Fill），自動將作戰編組的人員與車輛配置帶入表單中。
- **自動姓名替換**：自動將勤務表格（包含請假、補休、勤務排除等）中的數字番號替換為姓名標籤。
- **支援義消番號**：除了純數字編號，亦支援「義+數字」（如：`義22`）的編號格式。
- **備註欄解析**：自動識別備註欄中冒號（`:`）後方的番號，並將其轉化為易讀的姓名標籤。
- **視覺化標籤**：姓名會以淺藍色背景標籤顯示，方便與其他文字區隔。
- **本地端支援**：支援直接開啟下載後的 HTML 檔案（`file:///` 協議）。

## 安裝說明

1. 下載此專案程式碼。
2. 開啟 Chrome 瀏覽器，進入「擴充功能」頁面（在網址列輸入 `chrome://extensions/`）。
3. 開啟右上角的「**開發者模式**」。
4. 點擊「**載入解壓縮擴充功能**」，並選擇此專案的資料夾。

## 使用方式

1. 登入消防局的「人力及勤務管理系統」。
2. 進入任何一個單位的「勤務編組表」頁面。
3. 程式會自動執行，將畫面上的所有番號替換為姓名。
4. 若是查看下載後的離線 HTML 檔案，請確保已在擴充功能設定中勾選「**允許存取檔案網址**」。

## 技術細節

- **Manifest V3**：符合現代 Chrome 擴充功能規範。
- **Content Script**：在頁面載入完成（`document_idle`）後執行，自動抓取 `h5` 標籤中包含「勤務輪流順序與服勤人員對照表」的表格進行解析。
- **DOM 操作**：直接在瀏覽器端進行文本處理與 HTML 注入，不需額外的伺服器支援。

## 檔案結構

- `manifest.json`: 擴充功能設定檔。
- `content.js`: 核心邏輯處理程式（負責勤務表姓名替換）。
- `options.html` / `options.js`: 擴充功能設定頁面，負責解析勤務表、更新出勤人員，並顯示作戰編組唯讀摘要。
- `editor.html` / `editor.js`: 獨立的作戰編組編輯器介面與邏輯，支援拖曳排班與資料儲存。
- `quick_fill.js`: 負責在火警派遣系統中自動帶入作戰編組資料的腳本。
