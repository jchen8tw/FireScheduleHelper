# 快速更新作戰編組功能

## 頁面

### 1. Popup 頁面（options.html）
- 需顯示現在最新的作戰編組（唯讀摘要）
- 有兩個按鈕：
    - **快速填入**：在當前分頁（作戰編組.html）執行快速填入
    - **編輯作戰編組**：點擊後會**開啟新的瀏覽器分頁**（editor.html）進行編輯

### 2. 編輯作戰編組頁面（editor.html）— 獨立瀏覽器分頁
- 需從勤務表頁面中抓取**當日有上班的所有人**（即「輪(上)班」欄中出現的番號，搭配 idToNameMap 轉換為姓名）。
- 每個人會是一個可拖動的姓名條，內容為番號+姓名，例如：`1 詹博鈞`

#### 人員名單行為
- **已拉入作戰編組的人員應從人員名單中消失**
- **從作戰編組刪除後，該人員應重新出現於人員名單**

#### 拖放行為
- 人員名單 → 空位：直接放入
- 人員名單 → 已佔位：替換（被替換者回到人員名單）
- 已佔位 A → 已佔位 B：**兩者交換位置**
- 已佔位 → 空位：移動（原位清空）

#### 作戰編組空位
- 火警值班
- 攻擊水箱車：
    1. 帶隊官
    2. 司機
    3. 瞄子手
    4. 副瞄子手
    5. 破壞搜救手1
- 中繼水箱車：
    1. 司機
    2. 瞄子手
- 雲梯車：
    1. 司機
- 一般型救護車：
    1. 司機
    2. 救護技術員
- 休息（支援多人數，可新增與刪除人員位置）
- 水源查察（支援多人數，可新增與刪除人員位置）
- 自訂欄位（可新增與刪除整個欄位以及其中的人員位置）

#### 儲存
- 每次拖動都會自動儲存至 `chrome.storage.sync`
- Popup 頁面可即時讀取並顯示最新編組

#### 備註生成
- 休息、水源查察、及自訂欄位的人員會自動生成備註文字
- 格式：`任務名稱:人名1、人名2、...`

## 作戰編組快速填入邏輯

- 在 Popup 點擊「快速填入」時，於作戰編組.html 對應下拉選單中選擇對應的人名
- 若有人名在下拉選單中找不到，提示錯誤並終止

### 人員配置邏輯
- 火警值班必須有 1 人
- 攻擊水箱車、中繼水箱車、雲梯車、一般型救護車依序的人數配置：
    - **4-0-0-2 / 5-0-0-2**：攻擊、中繼、雲梯填入相同人員（注意雲梯車的人員職稱略有不同，但位置的順序相同，例如：隨員→瞄子手、助手→副瞄子手，若有破壞搜救手則雲梯車可以忽略破壞搜救手的位置。）
    - **4-1-0-2 / 5-1-0-2 / 4-0-1-2 / 5-0-1-2**：中繼/雲梯司機為同 1 人，其他隨員留空
    - **4-1-1-2 / 5-1-1-2**：中繼/雲梯司機各 1 人，其他隨員留空
    - **4-2-1-2 / 5-2-1-2**：中繼有司機+瞄子手，雲梯有司機

### 備註欄填入
- 格式：`任務名稱:人名1、人名2、人名3...`
